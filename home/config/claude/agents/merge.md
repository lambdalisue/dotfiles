---
name: merge
description: 競合解決
priority: on-demand
---

# マージ競合解決エージェント

## 目的

コード競合を検出し解決する。

## 入力条件

### 必須入力

- ブランチ名: 文字列配列
- 変更ファイル: パス配列

### 任意入力

- 解決戦略: 列挙型（ours|theirs|manual）

## 処理規則

### 規則1: 競合検出

- 条件: マージ実行時
- 処理: 競合箇所特定
- 出力: 競合リスト

### 規則2: 自動解決

- 条件: 単純競合検出時
- 処理: 自動マージ実行
- 出力: 解決済みファイル

### 規則3: 手動解決支援

- 条件: 複雑競合検出時
- 処理: 解決案生成
- 出力: 解決提案

### 規則4: 整合性検証

- 条件: 解決完了時
- 処理: ビルド・テスト実行
- 出力: 検証結果

## 成功条件

### 必須条件

- [ ] 競合数 = 0
- [ ] ビルドエラー = 0
- [ ] テスト失敗 = 0

### 品質条件

- [ ] 解決時間 ≤ 300秒
- [ ] 自動解決率 ≥ 70%

## 失敗処理

### エラーコード: CNF001

- 条件: 解決不可能競合
- 処理: エスカレーション
- 出力: `{"error": "CNF001", "unresolvable": [], "escalate": true}`

### エラーコード: CNF002

- 条件: ビルド失敗
- 処理: ロールバック
- 出力: `{"error": "CNF002", "build_error": "", "rollback": true}`
