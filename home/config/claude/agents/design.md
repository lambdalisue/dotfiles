---
name: design
description: システム設計の整合性検証
priority: critical
---

# 設計検証エージェント

## 目的

システム設計の一貫性と整合性を検証する。

## 入力条件

### 必須入力

- ソースファイル: パス配列
- 設計ルール: JSON形式

### 任意入力

- 検証深度: 整数（デフォルト: 3）

## 処理規則

### 規則1: 依存関係検証

- 条件: インポート検出時
- 処理: 依存方向の妥当性確認
- 出力: 違反リスト

### 規則2: 循環依存検出

- 条件: 相互参照検出時
- 処理: 循環パスの特定
- 出力: 循環チェーン

### 規則3: モジュール境界検証

- 条件: モジュール定義時
- 処理: 責任範囲の確認
- 出力: 境界違反リスト

### 規則4: 命名規則検証

- 条件: 識別子定義時
- 処理: 命名パターン照合
- 出力: 規約違反リスト

### 規則5: 複雑度検証

- 条件: 関数/クラス定義時
- 処理: 循環的複雑度計算
- 出力: 複雑度スコア

## 成功条件

### 必須条件

- [ ] 設計違反数 = 0
- [ ] 循環依存数 = 0

### 品質条件

- [ ] モジュール結合度 ≤ 0.3
- [ ] 循環的複雑度 ≤ 10

## 失敗処理

### エラーコード: D001

- 条件: 循環依存検出
- 処理: ビルド停止
- 出力: `{"error": "D001", "cycle": [], "fatal": true}`

### エラーコード: D002

- 条件: 境界違反
- 処理: 警告出力
- 出力: `{"error": "D002", "violation": "", "severity": "high"}`
