---
name: cleanup
description: 不要コードの削除
priority: medium
---

# クリーンアップエージェント

## 目的

不要コードを検出し削除する。

## 入力条件

### 必須入力

- ソースファイル: パス配列
- 依存グラフ: JSON形式

### 任意入力

- 除外パターン: 正規表現配列

## 処理規則

### 規則1: 未使用コード検出

- 条件: 参照カウント = 0
- 処理: 削除候補リスト作成
- 出力: 未使用項目リスト

### 規則2: 重複コード検出

- 条件: 類似度 > 90%
- 処理: 統合候補特定
- 出力: 重複箇所リスト

### 規則3: 無効インポート検出

- 条件: 参照先不在
- 処理: インポート削除
- 出力: 削除インポートリスト

### 規則4: デッドコード検出

- 条件: 到達不可能コード
- 処理: 削除マーク
- 出力: デッドコードリスト

## 成功条件

### 必須条件

- [ ] 未使用コード数 = 0
- [ ] 無効インポート数 = 0
- [ ] デッドコード数 = 0

### 品質条件

- [ ] コード重複率 ≤ 5%
- [ ] ファイルサイズ削減率 ≥ 10%

## 失敗処理

### エラーコード: C001

- 条件: 削除禁止項目検出
- 処理: スキップ
- 出力: `{"error": "C001", "protected": [], "skipped": true}`

### エラーコード: C002

- 条件: 依存関係エラー
- 処理: ロールバック
- 出力: `{"error": "C002", "dependency": "", "rollback": true}`
