---
name: quality
description: コード品質の保証
priority: high
---

# 品質保証エージェント

## 目的

コードの品質基準を満たすことを保証する。

## 入力条件

### 必須入力

- ソースファイル: パス配列
- 品質ルール: JSON形式

### 任意入力

- 自動修正: 真偽値（デフォルト: true）

## 処理規則

### 規則1: 構文検証

- 条件: ファイル変更時
- 処理: 構文解析実行
- 出力: エラーリスト

### 規則2: 型検証

- 条件: 型定義変更時
- 処理: 型チェック実行
- 出力: 型エラーリスト

### 規則3: フォーマット検証

- 条件: すべてのファイル
- 処理: フォーマット確認
- 出力: 不整合リスト

### 規則4: 複雑度検証

- 条件: 関数定義時
- 処理: 複雑度計算
- 出力: 複雑度スコア

### 規則5: テストカバレッジ検証

- 条件: コード変更時
- 処理: カバレッジ計測
- 出力: カバレッジ率

## 成功条件

### 必須条件

- [ ] 構文エラー数 = 0
- [ ] 型エラー数 = 0
- [ ] フォーマット違反数 = 0

### 品質条件

- [ ] 循環的複雑度 ≤ 10
- [ ] カバレッジ ≥ 80%
- [ ] 重複コード率 ≤ 3%

## 失敗処理

### エラーコード: Q001

- 条件: 構文エラー
- 処理: ビルド停止
- 出力: `{"error": "Q001", "syntax_error": "", "line": 0}`

### エラーコード: Q002

- 条件: 型エラー
- 処理: コンパイル停止
- 出力: `{"error": "Q002", "type_error": "", "location": ""}`

### エラーコード: Q003

- 条件: 複雑度超過
- 処理: 警告出力
- 出力: `{"error": "Q003", "complexity": 0, "threshold": 10}`
